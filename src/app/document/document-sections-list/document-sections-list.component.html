<mat-card>
    <mat-card-title>Document Sections</mat-card-title>
    <mat-card-subtitle>
        Create, delete, and re-order sections for this document
    </mat-card-subtitle>

    <mat-card-content>
        <mat-accordion [multi]="true" [togglePosition]="'before'" cdkDropList (cdkDropListDropped)="reorder($event)">
            <mat-expansion-panel cdkDrag *ngFor="let section of getSections();let index=index;trackBy:section?.id">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>reorder</mat-icon>
                        [{{section.type | uppercase}}] {{section.model?.title}}
                    </mat-panel-title>
                </mat-expansion-panel-header>
                
                <ng-container [ngSwitch]="section.type">
                    <app-checklist [sectionId]="section.id" *ngSwitchCase="'Checklist'">
                    </app-checklist>
    
                    <mat-card *ngSwitchCase="'Separator'">
                        <mat-divider></mat-divider>
                    </mat-card>
                </ng-container>

                <mat-action-row>
                    <button mat-button (click)="deleteSection(index)">
                        Delete Section<mat-icon>delete</mat-icon>
                    </button>
                </mat-action-row>

            </mat-expansion-panel>

            <!-- <mat-list-item cdkDrag *ngFor="let section of getSections();let index=index;trackBy:section?.id">
                
                {{section.type}}
                <button mat-button mat-icon-button (click)="deleteSection(index)">
                    <mat-icon>delete</mat-icon>
                </button>
            </mat-list-item> -->

        </mat-accordion>
    </mat-card-content>

    <mat-card-actions>
        <mat-form-field>
            <mat-label>Add a section of type</mat-label>
            <mat-select #SectionSelect>
                <mat-option *ngFor="let type of sectionTypes" [value]="type">
                    {{type}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <button mat-flat-button color="primary" (click)="addSection(SectionSelect.value);SectionSelect.value=undefined"
            [disabled]="!SectionSelect.value">
            Add Section
        </button>
    </mat-card-actions>
</mat-card>